define(function(require,exports){function a(){var a=$(".art-content .cl-preview-section h1, .art-content .cl-preview-section h2, .art-content .cl-preview-section h3"),h="";if(a.length){h+="<ul>";var v={},g={};a.each(function(i,a){v[1*a.nodeName.split("H")[1]]=!0}),Object.keys(v).forEach(function(a,i){g["h"+a]=i+1}),a.each(function(i){var a=$(this);a.before('<a id="anchor_'+i+'_virtual" class="virtual_anchor"></a>');var c=a.text(),v=a[0].nodeName.toLocaleLowerCase();h+='<li class="level_'+g[v]+'"><a href="#anchor_'+i+'">'+c+"</a></li>"}),h+="</ul>"}else h+='<ul class="empty">暂无索引</ul>';$(".reference-con .tree-con").html(h),$(".top-head").trigger("click"),c(),window.location.hash&&w(window.location.hash)}function c(){$(document).on("click",".tree-con li a",function(){var a=$(this).attr("href");w(a)}),h()}var h=function(){var a=$(".virtual_anchor"),c=Array.apply(this,a.map(function(){return $(this).offset().top}));c.length&&$(document).scroll(g(v.bind(this,c),200))},v=function(a){for(var c=$(document).scrollTop(),h=a.length-1,i=0;i<a.length;i++)if(c<a[i]){h=i;break}$('.tree-con a[href="#anchor_'+h+'"]').parent().addClass("active").siblings().removeClass("active")},w=function(a){var c=$(a+"_virtual").offset();c&&$("html, body").animate({scrollTop:c.top-70},200),$('.tree-con a[href="'+a+'"]').parent().addClass("active").siblings().removeClass("active")},g=function(a,c){var h=null,v=Date.now();return function(){var $=Date.now(),w=c-($-v),g=this,_=arguments;clearTimeout(h),0>=w?(a.apply(g,_),v=Date.now()):h=setTimeout(a,w)}};exports.init=a});